extends layout

block content
  h1= title

  p Welcome to #{title} :smile:


        div Escribe un mensaje
        br
        div
            textarea(id='message')
            button(id='boton') Enviar mensaje


        div(id='messages')

    script
      var socket = io.connect();
      $(document).ready(function () {
         emojify.setConfig({
          emojify_tag_type: 'div',
          emoticons_enabled: true,
          people_enabled: true,
          nature_enabled: true,
          objects_enabled: true,
          places_enabled: true,
          symbols_enabled: true
          });
          emojify.run();
         socket.on('connected', function (data) {
            console.log(data);
            socket.emit('my other event',"ADIOS");
         });

         $('#boton').click(function () {
            socket.emit('user message',$('#message').val());

            $('#message').val('').focus();
         });

         //muestra los mensajes que el servidor ha mandado con emit
               emojify.setConfig({
                                           emojify_tag_type: 'div',
                                           emoticons_enabled: true,
                                           people_enabled: true,
                                           nature_enabled: true,
                                           objects_enabled: true,
                                           places_enabled: true,
                                           symbols_enabled: true
                                           });

       socket.on('user message', function (data) {

            $('#messages').append('<p>' + data + '</p>');
            emojify.run();

            });

      });


        //socket.on('news', function (data) {
        //    console.log(data);
        //    socket.emit('my other event',"ADIOS");
        //     });

       //$('#send-message').submit(function(){
       //     socket.emit('user mesasge', $('message').val() );
       //     $('#message').val('').focus();
       //     return false;
       //     });


       //var socket = io.connect('http://localhost');
       //socket.on('message', function (data) {
       //   $('#chat').append(data.text + '<br />');
       //});


      //});





